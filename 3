local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local StarterGui = game:GetService("StarterGui")
local LocalPlayer = Players.LocalPlayer

local function SendNotification(title, text)
    StarterGui:SetCore("SendNotification", {Title = title, Text = text})
end

local function PlayEmote(name, id)
    local Character = LocalPlayer.Character
    if not Character then return end
    local Humanoid = Character:FindFirstChildOfClass("Humanoid")
    if not Humanoid then return end
    local Description = Humanoid:FindFirstChildOfClass("HumanoidDescription")
    if not Description then
        Description = Instance.new("HumanoidDescription")
        Description.Parent = Humanoid
    end
    if Humanoid.RigType ~= Enum.HumanoidRigType.R6 then
        local success = pcall(function()
            Humanoid:PlayEmoteAndGetAnimTrackById(id)
        end)
        if not success then
            Description:AddEmote(name, id)
            Humanoid:PlayEmoteAndGetAnimTrackById(id)
        end
    else
        SendNotification("r6? lol", "you gotta be r15 dude")
    end
end

local function AddEmoteToDescription(Character)
    local Humanoid = Character:WaitForChild("Humanoid")
    local Description = Humanoid:WaitForChild("HumanoidDescription", 5) or Instance.new("HumanoidDescription")
    Description.Parent = Humanoid
    Description:AddEmote("moonwalk", 79127989560307)
end

if LocalPlayer.Character then
    AddEmoteToDescription(LocalPlayer.Character)
end
LocalPlayer.CharacterAdded:Connect(AddEmoteToDescription)

UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    if input.KeyCode == Enum.KeyCode.Z then
        PlayEmote("moonwalk", 79127989560307)
    end
end)
